import joinMonster from 'join-monster';

// Require knex db configuration
import { knex } from '../../../../db/index';

export function mysqlConnector(obj, args, context, info) {
  return joinMonster(info, {}, sql => (
    console.log(sql), // Show the SQL generated by joinMonster to pass to Knex for the fetching.
    knex.raw(sql)
  ).then((result) => {
    const parsedResult = JSON.parse(JSON.stringify(result[0]));
    console.log(parsedResult);
    return result[0];
  }), { dialect: 'mysql' });
}
